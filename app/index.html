<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Test</title>
	</head>
	<body>
		<script type="module">
			import { wompDefaultOptions, ssr, html, defineWomp } from '../dist/womp.js';
			wompDefaultOptions.shadow = false;
			const port = 3000;

			function Nested({ styles: s, children, title, user = {} }) {
				return html`<main class=${s.main}>
					<h1>${title}</h1>
					<h4>${user.name}</h4>
					<div>${children}</div>
					<${ThirdComponent} value=${0} user=${{ name: 'Ponchi' }} />
				</main>`;
			}
			Nested.css = `
				.main {
					color: red;
				}
			`;

			function ThirdComponent({ user, value, children }) {
				return html`<div>
					<h1>${user.name} ${user.lastname}</h1>
					<input value=${value} />
					${children}
				</div>`;
			}

			function Component({}) {
				const user = {
					name: 'Lorenzo',
					lastname: 'Lannino',
				};
				return html`<div>
					<p>I rendered this from the serverrrrr!!!</p>
					<p>Port: ${port}</p>
					<${ThirdComponent} user=${user} value=${0}>
						<${Nested} title="Suca" />
					</${ThirdComponent}>
					<${ThirdComponent} user=${{ name: 'Vaso' }} value=${1} />
				</div>`;
			}
			Component.css = `p {color: blue;}`;

			defineWomp(Component, { shadow: false });
			defineWomp(ThirdComponent, { shadow: false });
			defineWomp(Nested, { shadow: false });

			const content = ssr(Component, {});
			console.log(content);
			document.getElementById('root').innerHTML = content;
		</script>
		<script type="module">
			import Counter from './counter-component.js';

			// import OldCounter from './old-counter.js';

			/* console.time('Perf');
			let length = 1000;
			while (length--) {
				const counter = new Counter.class();
				document.body.appendChild(counter);
			}
			console.timeEnd('Perf'); */

			/* console.time('PerfOld');
			const oldCounter = new OldCounter();
			document.body.appendChild(oldCounter);
			console.timeEnd('PerfOld'); */
		</script>

		<div id="root"></div>
	</body>
</html>

<!-- 
12.84kb
45.56ms - 46.33ms
-->

<!-- npx tachometer ./app/index.html -->
<!-- <script type="module">
	import * as bench from '/bench.js';
	bench.start();
	await import('./render.js');
	bench.stop();
</script>
-->
