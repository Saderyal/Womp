const Q=!1;let x=null,C=0;const y="$wc$",H="wc-wc",$=/<\/?$/g,A=/\s+([^\s]*?)="?$/g,P=/(<([a-x]*?-[a-z]*).*?)\/>/g,O=/<(?<tag>script|style|textarea|title])(?!.*?<\/\k<tag>)/gi,I=/^(?:script|style|textarea|title)$/i,v=0,T=1,R=2,k=document.createTreeWalker(document,129);class V{constructor(e,t){this.template=e,this.dependencies=t}clone(){const e=this.template.content,t=this.dependencies,o=document.importNode(e,!0);k.currentNode=o;let n=k.nextNode(),i=0,s=0,c=t[0];const r=[];for(;c!==void 0;){if(i===c.index){let l;const d=c.type;d===v?l=new W(n,n.nextSibling):d===T?l=new F(n,c):d===R&&(l=new j(n)),r.push(l),c=t[++s]}i!==c?.index&&(n=k.nextNode(),i++)}return k.currentNode=document,[o,r]}}class L{constructor(e,t,o){this.stringifiedTemplate=e,this.values=t,this.template=o}}class W{constructor(e,t){this.isNode=!0;this.isAttr=!1;this.isTag=!1;this.startNode=e,this.endNode=t}clearValue(){let e=this.startNode.nextSibling;for(;e!==this.endNode;)e.remove(),e=this.startNode.nextSibling}dispose(){this.clearValue(),this.startNode.remove(),this.endNode.remove()}}class F{constructor(e,t){this.isNode=!1;this.isAttr=!0;this.isTag=!1;this.__eventInitialized=!1;this.node=e,this.name=t.name,this.index=t.index,this.attrStructure=t.attrDynamics}updateValue(e){if(this.name==="ref"&&e.__wcRef){if(e.current=this.node,this.node._$womp){const o=this.node.onDisconnected;this.node.onDisconnected=()=>{e.current=null,o()}}return}this.node._$womp&&this.node.updateProps(this.name,e);const t=e!==Object(e);if(e===!1)this.node.removeAttribute(this.name);else if(t)this.node.setAttribute(this.name,e);else if(this.name==="style"){let o="";const n=Object.keys(e);for(const i of n){let s=e[i],c=i.replace(/[A-Z]/g,r=>"-"+r.toLowerCase());typeof s=="number"&&(s=`${s}px`),o+=`${c}:${s};`}this.node.setAttribute(this.name,o)}}set callback(e){if(!this.__eventInitialized){const t=this.name.substring(1);this.node.addEventListener(t,this.listener.bind(this)),this.__eventInitialized=!0}this.__callback=e}listener(e){this.__callback&&this.__callback(e)}}class j{constructor(e){this.isNode=!1;this.isAttr=!1;this.isTag=!0;this.node=e}}class G{constructor(e){this._$wompChildren=!0;this.nodes=e}}class q{constructor(e,t){this.isArrayDependency=!0;this.dynamics=[],this.__parentDependency=t,this.addDependenciesFrom(t.startNode,e.length),this.__oldValues=D(this.dynamics,e,[])}addDependenciesFrom(e,t){let o=e,n=t;for(;n;){const i=document.createComment("?START"),s=document.createComment("?END");o.after(i),i.after(s);const c=new W(i,s);o=s,this.dynamics.push(c),n--}}checkUpdates(e){let t=e.length-this.__oldValues.length;if(t>0){let o=this.dynamics[this.dynamics.length-1]?.endNode;o||(o=this.__parentDependency.startNode),this.addDependenciesFrom(o,t)}else if(t<0)for(;t;)this.dynamics.pop().dispose(),t++;return this.__oldValues=D(this.dynamics,e,this.__oldValues),this}}const z=(a,e)=>{const{css:t}=a,{shadow:o,name:n,cssGeneration:i}=e,s=n,c={};let r=t;return i&&(r=`${o?":host":s} {display:block;}
${t}`.replace(/\.(.*?)[\s|{]/gm,(d,p)=>{const m=`${s}__${p}`;return c[p]=m,`.${m} `})),[r,c]},U=a=>{let e="";const t=[],o=a.length-1;let n="",i="";for(let s=0;s<o;s++){let c=a[s];if(n&&c.includes(n)&&(n=""),i&&new RegExp(`</${i}>`)&&(i=""),n||i)e+=c+y;else{A.lastIndex=0;const r=A.exec(c);if(r){const[l,d]=r,p=l[l.length-1];n=p==='"'||p==="'"?p:"",c=c.substring(0,c.length-n.length-1);let m=`${c}${y}=`;n?m+=`${n}${y}`:m+='"0"',e+=m,t.push(d)}else{if(c.match($)){e+=c+H;continue}O.lastIndex=0;const l=O.exec(c);l?(i=l[1],e+=c+y):e+=c+`<?${y}>`}}}return e+=a[a.length-1],e=e.replace(P,"$1></$2>"),[e,t]},J=(a,e,t)=>{const o=[];k.currentNode=a.content;let n,i=0,s=0;const c=e.length;for(;(n=k.nextNode())!==null&&o.length<c;){if(n.nodeType===1){if(n.nodeName===H.toUpperCase()){const r={type:R,index:s};o.push(r)}if(n.hasAttributes()){const r=n.getAttributeNames();for(const l of r)if(l.endsWith(y)){const d=t[i++],p=n.getAttribute(l);if(p!=="0"){const m=p.split(y);for(let u=0;u<m.length-1;u++){const h={type:T,index:s,attrDynamics:p,name:d};o.push(h)}}else{const m={type:T,index:s,name:d};o.push(m)}n.removeAttribute(l)}}if(I.test(n.tagName)){const r=n.textContent.split(y),l=r.length-1;if(l>0){n.textContent="";for(let d=0;d<l;d++)n.append(r[d],document.createComment("")),k.nextNode(),o.push({type:v,index:++s});n.append(r[l],document.createComment(""))}}}else n.nodeType===8&&n.data===`?${y}`&&o.push({type:v,index:s});s++}return o},K=a=>{let e="";const{parts:t,values:o}=a;for(let n=0;n<t.length;n++)e+=t[n],o[n]?.componentName&&(e+=o[n].componentName);return e},Z=(a,e,t)=>{const o=a!==e,n=!!t.attrStructure,s=a?._$wompChildren&&t.startNode.nextSibling!==a.nodes[0];return o||n||s},D=(a,e,t)=>{const o=[...e];for(let n=0;n<a.length;n++){const i=a[n],s=o[n],c=t[n];if(Z(s,c,i)){if(i.isNode){if(s===!1){i.clearValue();continue}if(s?._$wompHtml){const p=c?.stringifiedTemplate,m=K(s);if(c===void 0||!(m===p)){const f=M(s.parts).clone(),[g,S]=f;o[n]=new L(m,s.values,f),D(S,s.values,c?.values??c??[]);const _=i.endNode,N=i.startNode;let b=N.nextSibling;for(;b!==_;)b.remove(),b=N.nextSibling;for(b=N;g.childNodes.length;)b.after(g.childNodes[0]),b=b.nextSibling}else{const[h,f]=c.template,g=D(f,s.values,c.values);c.values=g,o[n]=c}continue}const r=s!==Object(s),l=c!==Object(c)&&c!==void 0,d=i.startNode;if(r)l?d.nextSibling?d.nextSibling.textContent=s:d.after(s):(i.clearValue(),d.after(s));else{let p=d.nextSibling,m=0,u=0;if(s._$wompChildren){const h=s.nodes;for(;u<h.length;){(!p||u===0)&&(p=d);const f=h[m];m++,p.after(f),p=p.nextSibling,u++}}else Array.isArray(s)&&(c?.isArrayDependency?o[n]=c.checkUpdates(s):(i.clearValue(),o[n]=new q(s,i)))}}else if(i.isAttr)if(i.name.startsWith("@"))i.callback=s;else{const l=i.attrStructure;if(l){const d=l.split(y);let p=s;for(let m=0;m<d.length-1;m++)d[m]=`${d[m]}${p}`,n++,p=o[n];n--,i.updateValue(d.join("").trim())}else i.updateValue(s)}else if(i.isTag){const r=i.node;let l=null;const d=s._$womp,p=d?s.componentName:s;if(r.nodeName!==p.toUpperCase()){const m=r.getAttributeNames();if(d){const f={};for(const S of m){const _=r.getAttribute(S);f[S]=_===""?!0:_}l=new s,l.initialProps=f;const g=r.childNodes;for(;g.length;)l.appendChild(g[0])}else{l=document.createElement(p);for(const f of m)l.setAttribute(f,r.getAttribute(f))}let u=n,h=a[u];for(;h?.node===r;)h.node=l,h=a[++u],h?.name&&h?.name!=="ref"&&(l.initialProps[h.name]=e[u]);r.replaceWith(l)}}}}return o},M=a=>{const[e,t]=U(a),o=document.createElement("template");o.innerHTML=e;const n=J(o,a,t);return new V(o,n)},Y=(a,e)=>{const[t,o]=z(a,e),n=document.createElement("style"),i=`${e.name}__styles`;return n.classList.add(i),n.textContent=t,e.shadow||document.body.appendChild(n),class extends HTMLElement{constructor(){super();this.hooks=[];this.props={};this.measurePerf=!1;this._$womp=!0;this.initialProps={};this.__updating=!1;this.__oldValues=[];this.__isInitializing=!0;this.__connected=!1;this.__isInDOM=!1}static{this.componentName=e.name}static{this._$womp=!0}static getOrCreateTemplate(r){return this.cachedTemplate||(this.cachedTemplate=M(r)),this.cachedTemplate}connectedCallback(){this.__isInDOM=!0,this.__connected||this.initElement()}disconnectedCallback(){this.__connected&&(this.__isInDOM=!1,Promise.resolve().then(()=>{this.__isInDOM||this.onDisconnected()}))}onDisconnected(){}initElement(){this.__ROOT=this,this.props={...this.initialProps,styles:o};const r=this.getAttributeNames();for(const E of r)if(!this.props.hasOwnProperty(E)){const w=this.getAttribute(E);this.props[E]=w===""?!0:w}const l=this.__ROOT.childNodes,d=[],p=document.createElement("template");for(;l.length;)d.push(l[0]),p.appendChild(l[0]);const m=new G(d);this.props.children=m,e.shadow&&(this.__ROOT=this.attachShadow({mode:"open"}));const u=this.getRootNode();if((e.shadow||u!==document)&&!u.querySelector(`.${i}`)){const E=n.cloneNode(!0);this.__ROOT.appendChild(E)}const h=this.callComponent(),{values:f,parts:g}=h,S=this.constructor.getOrCreateTemplate(g),[_,N]=S.clone();this.__dynamics=N;const b=D(this.__dynamics,f,this.__oldValues);for(this.__oldValues=b;_.childNodes.length;)this.__ROOT.appendChild(_.childNodes[0]);this.__isInitializing=!1,this.__connected=!0}callComponent(){x=this,C=0;const r=a.call(this,this.props);let l=r;return(typeof r=="string"||r instanceof HTMLElement)&&(l=html`${r}`),l}requestRender(){this.__updating||(this.__updating=!0,Promise.resolve().then(()=>{const r=this.callComponent(),l=D(this.__dynamics,r.values,this.__oldValues);this.__oldValues=l,this.__updating=!1}))}updateProps(r,l){this.props[r]!==l&&(this.props[r]=l,this.__isInitializing||(console.warn(`Updating ${r}`,this.__isInitializing),this.requestRender()))}}};export const useHook=()=>{const t=[x,C];return C++,t},useState=a=>{const[e,t]=useHook();if(!e.hooks.hasOwnProperty(t)){const n=t;e.hooks[n]=[a,i=>{let s=i;const c=e.hooks[n];typeof i=="function"&&(s=i(c[0])),s!==c[0]&&(c[0]=s,e.requestRender())}]}return e.hooks[t]},useEffect=(a,e)=>{const[t,o]=useHook();if(t.hooks.hasOwnProperty(o)){const n=t.hooks[o];for(let i=0;i<e.length;i++)if(n.dependencies[i]!==e[i]){typeof n.cleanupFunction=="function"&&n.cleanupFunction(),Promise.resolve().then(()=>{n.cleanupFunction=a(),n.dependencies=e});break}}else{const n={dependencies:e,callback:a,cleanupFunction:null};t.hooks[o]=n,Promise.resolve().then(()=>{n.cleanupFunction=a()})}},useLayoutEffect=(a,e)=>{const[t,o]=useHook();if(t.hooks.hasOwnProperty(o)){const n=t.hooks[o];for(let i=0;i<e.length;i++)if(n.dependencies[i]!==e[i]){typeof n.cleanupFunction=="function"&&n.cleanupFunction(),n.cleanupFunction=a(),n.dependencies=e;break}}else{const n={dependencies:e,callback:a,cleanupFunction:null};t.hooks[o]=n,n.cleanupFunction=a()}},useRef=(a=null)=>{const[e,t]=useHook();return e.hooks.hasOwnProperty(t)||(e.hooks[t]={current:a,__wcRef:!0}),e.hooks[t]},useCallback=a=>{const[e,t]=useHook();return e.hooks.hasOwnProperty(t)||(e.hooks[t]=a),e.hooks[t]};const B=()=>{let a=0;return()=>{const[e,t]=useHook();return e.hooks.hasOwnProperty(t)||(e.hooks[t]=`:r${a}:`,a++),e.hooks[t]}};export const useId=B(),useMemo=(a,e)=>{const[t,o]=useHook();if(!t.hooks.hasOwnProperty(o))t.hooks[o]={value:a(),dependencies:e};else{const i=t.hooks[o];for(let s=0;s<e.length;s++)if(i.dependencies[s]!==e[s]){i.dependencies=e,i.value=a();break}}return t.hooks[o].value},useReducer=(a,e)=>{const[t,o]=useHook(),n=o;if(!t.hooks.hasOwnProperty(n)){const c=[e,r=>{const l=t.hooks[n][0],d=a(l,r),p=Object.keys(d);for(const u of p)if(d[u]!==l[u]){t.requestRender();break}const m={...l,...d};t.hooks[o][0]=m}];t.hooks[o]=c}return t.hooks[o]},useExposed=a=>{const e=x,t=Object.keys(a);for(const o of t)e[o]=a[o]},useGlobalState=(a,e={})=>{const t={storage:null,reducer:null,...e};let o=a;t.storage&&(o=JSON.parse(localStorage.getItem(t.storage)),o===null&&(o=a)),t.async&&(o={state:"loading",data:o,error:null});const n=new Set;let i;t.reducer?i=c=>{const r=t.async?s.value.data:s.value,l=t.reducer(r,c);typeof l=="object"&&!Array.isArray(l)&&l!==null?s.value={...s.value,...l}:s.value=l,t.storage&&localStorage.setItem(t.storage,JSON.stringify(s.value));for(const d of n)d.requestRender()}:i=c=>{let r=c;const l=t.async?s.value.data:s.value;if(typeof c=="function"&&(r=c(structuredClone(l))),l!==r){t.async?s.value.data=r:s.value=r,t.storage&&localStorage.setItem(t.storage,JSON.stringify(s.value));for(const d of n)d.requestRender()}},t.async&&t.async().then(c=>{s.value={state:"hasData",data:c,error:null};for(const r of n)r.requestRender()}).catch(c=>{s.value={state:"hasError",data:null,error:c};for(const r of n)r.requestRender()});const s={value:o,subscribers:n,setter:i};return(c=!1)=>{const[r,l]=useHook();if(!r.hooks.hasOwnProperty(l)){const d=r.onDisconnected;r.onDisconnected=()=>{n.delete(r),d()},c||n.add(r),r.hooks[l]=s}return[s.value,i]}};export function html(a,...e){const t=[],o=a.length-1;for(let n=0;n<o;n++)a[n].endsWith("</")||t.push(e[n]);return{parts:a,values:t,_$wompHtml:!0}}export const wompDefaultOptions={shadow:!1,name:"",cssGeneration:!0};export function defineWomp(a,e={}){a.css||(a.css="");const t={...wompDefaultOptions,...e};if(!t.name){let n=a.name.replace(/.[A-Z]/g,i=>`${i[0]}-${i[1].toLowerCase()}`).toLowerCase();n.includes("-")||(n+="-womp"),t.name=n}const o=Y(a,t);return customElements.define(t.name,o),o}